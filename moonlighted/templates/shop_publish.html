{% extends "base.html" %}

{% block title %}
    发布商品
{% endblock %}

{% block content %}
    <form method="post" enctype="multipart/form-data">
        <div class="form-group">
            {{ form.file.label }} {{ form.file(class="form-control", placeholder="请上传商品图片") }}
        </div>
        <div class="form-group">
            {{ form.commodity.label }} {{ form.commodity(class="form-control", placeholder="请输入商品名称") }}
        </div>
        <div class="form-group">
            <p class="white">请输入内容</p>
            <div id="editor"></div>
            <textarea style="display: none" name="content" id="content"></textarea>
        </div>
        <div class="form-group">
            {{ form.contact.label }} {{ form.contact(class="form-control", placeholder="请输入联系方式") }}
        </div>
        <div class="form-group">
            {{ form.submit( class="btn btn-default") }}
        </div>
    </form>
    <script src="https://cdn.bootcdn.net/ajax/libs/wangEditor/3.1.1/wangEditor.min.js"></script>

    <script type="text/javascript">
        var E = window.wangEditor
        var editor = new E('#editor')
        var $text1 = $('#content');
        editor.customConfig.onchange = function (html) {
            $text1.val(html);
        }
        editor.customConfig.uploadImgShowBase64 = true// 使用 base64 保存图片
        // editor.customConfig.uploadImgServer = '/upload'  // 上传图片到服务器
        editor.create()
        // $text1.val(editor.txt.html());// 初始化 textarea 的值
    </script>
{% endblock %}
